}
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] & rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
} View(result)
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
i=1
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
statelist[i]
temp<- rankbystatedata[rankbystatedata$State==statelist[i],]
worsthospital <- temp[temp$rank==max(temp$rank),]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
result
result<-data.frame()
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
View(result)
result <- data.frame()
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- rankbystatedata[, 1:2]
result
}
else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- rankbystatedata[, 1:2]
result
}
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp<- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, ]
View(worsthospital)
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, c(1:2)]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
View(worsthospital)
rm(worsthospital)
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
View(worsthospital)
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
result<-data.frame()
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
result <- data.frame()
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- rankbystatedata[, 1:2]
result
} else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- rankbystatedata[, 1:2]
result
}
result <- data.frame()
num == "worst"
result <- data.frame()
num <- "worst"
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- rankbystatedata[, 1:2]
result
} else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- rankbystatedata[, 1:2]
result
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
}
result <- data.frame()
num <- "best"
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- rankbystatedata[, 1:2]
result
View(result)
} else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- rankbystatedata[, 1:2]
View(result)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
}
result <- data.frame()
num <- "best"
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- rankbystatedata[, 1:2]
result
View(result)
} else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- rankbystatedata[, 1:2]
View(result)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
}
result <- data.frame()
num <- "best"
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- rankbystatedata[, 1:2]
result
View(result)
} else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- rankbystatedata[, 1:2]
View(result)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
View(result)
}
result1 <- data.frame()
result2 <- data.frame()
result3 <- data.frame()
num <- "best"
if(num == "best") {
result1 <- subset(rankbystatedata, rankbystatedata$rank == 1)
result1 <- rankbystatedata[, 1:2]
result1
View(result1)
} else if(num != "best" && class(num) == "numeric") {
result2 <- subset(rankbystatedata, rankbystatedata$rank == num)
result2 <- rankbystatedata[, 1:2]
View(result2)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result3 <- rbind(result3, worsthospital)
}
View(result3)
}
result1 <- subset(rankbystatedata, rankbystatedata$rank == 1)
result1
result1 <- data.frame()
result2 <- data.frame()
result3 <- data.frame()
num <- "best"
if(num == "best") {
result1 <- subset(rankbystatedata, rankbystatedata$rank == 1)
result1 <- result1[, 1:2]
result1
View(result1)
} else if(num != "best" && class(num) == "numeric") {
result2 <- subset(rankbystatedata, rankbystatedata$rank == num)
result2 <- result2[, 1:2]
View(result2)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result3 <- rbind(result3, worsthospital)
}
View(result3)
}
result1 <- data.frame()
result2 <- data.frame()
result3 <- data.frame()
num <- "3"
if(num == "best") {
result1 <- subset(rankbystatedata, rankbystatedata$rank == 1)
result1 <- result1[, 1:2]
result1
View(result1)
} else if(num != "best" && class(num) == "numeric") {
result2 <- subset(rankbystatedata, rankbystatedata$rank == num)
result2 <- result2[, 1:2]
View(result2)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result3 <- rbind(result3, worsthospital)
}
View(result3)
}
result1 <- data.frame()
result2 <- data.frame()
result3 <- data.frame()
num <- 3
if(num == "best") {
result1 <- subset(rankbystatedata, rankbystatedata$rank == 1)
result1 <- result1[, 1:2]
result1
View(result1)
} else if(num != "best" && class(num) == "numeric") {
result2 <- subset(rankbystatedata, rankbystatedata$rank == num)
result2 <- result2[, 1:2]
View(result2)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result3 <- rbind(result3, worsthospital)
}
View(result3)
}
result1 <- data.frame()
result2 <- data.frame()
result3 <- data.frame()
num <- "worst"
if(num == "best") {
result1 <- subset(rankbystatedata, rankbystatedata$rank == 1)
result1 <- result1[, 1:2]
result1
View(result1)
} else if(num != "best" && class(num) == "numeric") {
result2 <- subset(rankbystatedata, rankbystatedata$rank == num)
result2 <- result2[, 1:2]
View(result2)
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result3 <- rbind(result3, worsthospital)
}
View(result3)
}
source(rankall.r)
setwd("C:\\All-Files\\Study&Learning\\Coursera\\DataScience")
source(rankall.r)
source(rankall.R)
source("rankall.R")
rankall("heart failure")
rankall("heart failure", 3)
rankall("heart failure", 3)
rankall("heart failure")
rankall("heart failure", 5)
source("rankall.R")
rankall("heart failure", 5)
rankall("heart failure", "worst")
source("rankall.R")
rankall("heart failure", "worst")
rankall("heart failure", 10)
rankall("heart failure", 9)
head(rankall("heart attack", 20), 10)
rankall("heart attack", 20)
head(rankall("heart attack", 10), 10)
source("rankall.R")
head(rankall("heart attack", 10), 10)
rankall("heart failure", 9)
source("rankall.R")
head(rankall("heart attack", 10), 10)
rankall("heart failure", 9)
rankall("heart failure", 10)
rankall("heart failure", 9)
head(rankall("heart failure", 9), 5)
head(rankall("heart failure", 9), 10)
head(rankall("heart attack", 9), 10)
head(rankall("heart failure", 20), 10)
head(rankall("heart attack", 10), 10)
result
num
num=20
result <- subset(rankbystatedata, rankbystatedata$rank == num)
View
View(result)
result <- left_join(statelist,result)
statelist2 <- data.frame(statelist)
View(statelist2)
result <- left_join(statelist2,result)
names(result)
names(statelist2)
names(statelist2)[1]
names(statelist2)[1]<-"State"
result <- left_join(statelist2,result)
View(result)
names(statelist2)[1]<-"State"
source("rankall.R")
head(rankall("heart failure", 20), 10)
head(rankall("heart attack", 10), 10)
num = 20
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- result[, 1:2]
result <- left_join(statelist2, result)
result
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- result[, 1:2]
result <- left_join(statelist2, result)
result <- arrange(result, result$State)
result
source("rankall.R")
head(rankall("heart attack", 10), 10)
class(result)
class(result$State)
class(result$)
class(result$hospital.name)
num = 20
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- result[, 1:2]
result <- left_join(statelist2, result)
result <- arrange(result, result$State)
result
source("rankall.R")
head(rankall("heart attack", 10), 10)
finaldata <- if(outcome == "heart attack")
{
neededdata[, c(1, 2, 3)]
} else if(outcome == "heart failure")
rankall <- function(outcome, num = "best") {
# Read outcome data
data <- read.table("week4assignment-outcome-of-care-measures.csv", header = TRUE, sep = ",", na.strings = "NA", stringsAsFactors = FALSE)
# Taking subset of data with only the hospital name, state and the required mortality rate columns
neededdata <- data[, c(which(colnames(data) == "Hospital.Name"),
which(colnames(data) == "State"),
which(colnames(data) == "Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack"),
which(colnames(data) == "Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure"),
which(colnames(data) == "Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia"))]
# Renaming the complex column names with simple ones.
colnames(neededdata) <- c("hospital.name", "State", "heart.attack", "heart.failure", "pneumonia")
# Replacing all "Not Available" values with NA
neededdata[neededdata == "Not Available"] <- NA
# Converting all the value columns to numeric
neededdata$heart.attack <- as.numeric(neededdata$heart.attack)
neededdata$heart.failure <- as.numeric(neededdata$heart.failure)
neededdata$pneumonia <- as.numeric(neededdata$pneumonia)
# Create the states and outcomes list
statelist <- unique(neededdata$State)
outcomelist <- c("heart attack", "heart failure", "pneumonia")
# Getting outcome from input and choosing the final data subset
finaldata <- if(outcome == "heart attack")
{
neededdata[, c(1, 2, 3)]
} else if(outcome == "heart failure")
{
neededdata[, c(1, 2, 4)]
} else if(outcome == "pneumonia")
{
neededdata[, c(1, 2, 5)]
} else {
stop("invalid outcome")
}
# Dropping NAs
finaldata <- finaldata[complete.cases(finaldata[, 3]), ]
# Creating final dataset with rank by state, considering mortality rate and hospital name
rankbystatedata <- data.frame()
for(i in 1:length(statelist)){
statewisedata <- finaldata[finaldata$State==statelist[i],]
statewisedata <- arrange(statewisedata, statewisedata$heart.failure, statewisedata$hospital.name)
statewisedata$rank <- 1:nrow(statewisedata)
rankbystatedata<-rbind(rankbystatedata, statewisedata)
}
# Arranging by state
rankbystatedata <- arrange(rankbystatedata, rankbystatedata$State)
# Defining value of num and getting the resultant output
statelist2 <- data.frame(statelist)
names(statelist2)[1]<-"State"
result <- data.frame()
#num = 20
if(num == "best") {
result <- subset(rankbystatedata, rankbystatedata$rank == 1)
result <- result[, 1:2]
result
} else if(num != "best" && class(num) == "numeric") {
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- result[, 1:2]
result <- left_join(statelist2, result)
result <- arrange(result, result$State)
result
} else if(num == "worst") {
for(i in 1:length(statelist)) {
maxrank <- nrow(rankbystatedata[rankbystatedata$State==statelist[i], ] )
temp <- rankbystatedata[rankbystatedata$State==statelist[i],]
# worsthospital <- temp[temp$rank==max(temp$rank),]
worsthospital <- temp[temp$rank == maxrank, 1:2]
#worsthospital <- rankbystatedata[rankbystatedata$State==statelist[i] && rankbystatedata$rank == maxrank, ]
result <- rbind(result, worsthospital)
}
result
}
}
head(rankall("heart attack", 10), 10)
head(rankall("heart attack", 10), 10)
save.image("C:/All-Files/Study&Learning/Coursera/DataScience/temp.RData")
rankall("heart attack", 10)
num=20
result <- subset(rankbystatedata, rankbystatedata$rank == num)
result <- result[, 1:2]
result <- left_join(statelist2, result)
result <- arrange(result, result$State)
result
source("rankall.R")
head(rankall("heart failure", 20), 10)
source("best.R")
source("rankall.R")
source("rankhospital.R")
head(rankall("heart attack", 20), 10)
tail(rankall("pneumonia", "worst"), 3)
tail(rankall("heart failure"), 10)
best("SC", "heart attack")
best("NY", "pneumonia")
best("AK", "pneumonia")
rankhospital("NC", "heart attack", "worst")
rankhospital("WA", "heart attack", 7)
rankhospital("TX", "pneumonia", 10)
rankhospital("NY", "heart attack", 7)
r <- rankall("heart attack", 4)
as.character(subset(r, state == "HI")$hospital)
rankall("heart attack", 4)
subset(r, r$State == "HI")
r <- rankall("pneumonia", "worst")
r <- rankall("pneumonia", "worst")
subset(r, r$State == "NJ")
r <- rankall("heart failure", 10)
subset(r, r$State == "NV")
